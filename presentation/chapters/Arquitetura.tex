\section{Arquitetura}

\newcommand{\makenode}[1]{
\begin{tikzpicture}
	\coordinate (A) at (1.5,0);
	\coordinate (AN) at ($(A) + (0,1.3)$);
	\node at (AN) {#1};
	\node (rect) at (A) [draw,thick,minimum width=2cm,minimum height=4cm] {};
\end{tikzpicture}
}

\begin{frame}
\frametitle{Nós}
	\makenode{1}
	\makenode{2}
\centering
\end{frame}

\newcommand{\makens}[2]{
\begin{tikzpicture}
	\coordinate (A) at (1.5,0);
	\coordinate (AN) at ($(A) + (0,1.3)$);
	\node at (AN) {#1};
	\node (rect) at (A) [draw,thick,minimum width=3.5cm,minimum height=3cm] {};
	\coordinate (B) at ($(AN) + (0,2.5)$);
	\coordinate (BN) at ($(B) + (0,1.3)$);
	\node at (BN) {#2};
	\node (rect) at (B) [draw,thick,minimum width=3.5cm,minimum height=3cm] {};
\end{tikzpicture}
}

\begin{frame}
\frametitle{Namespaces}
\centering
\begin{multicols}{3}
\makens{site}{ctfd}
\columnbreak
\makens{database}{redis}
\columnbreak
\makens{challs}{ingress-nginx}
\end{multicols}
\end{frame}

\begin{frame}
\frametitle{Namespaces}
\centering
\begin{multicols}{2}
\begin{tikzpicture}
	\coordinate (A) at (0,0);
	\coordinate (B) at (0,-2.25);
	\coordinate (C) at (0,-0.75);
	\coordinate (D) at (0,-1.5);
	\coordinate (E) at (-0.925,1.25);
	\coordinate (F) at (0.925,1.25);
	\coordinate (G) at (0.925,1.5);
	\coordinate (H) at (0.925,0.5);
	\coordinate (I) at (-0.925,1.5);
	\coordinate (J) at (-0.925,0.5);
	\node (rect) at (A) [draw,thick,minimum width=4cm,minimum height=6cm] {};
	\node (rect) at (B) [draw,thick,minimum width=3.5cm,minimum height=0.5cm] {};
	\node at (B) {\footnotesize Máquina host};
	\node (rect) at (C) [draw,thick,minimum width=3.5cm,minimum height=0.5cm] {};
	\node at (C) {\footnotesize HyperVisor};
	\node (rect) at (D) [draw,thick,minimum width=3.5cm,minimum height=0.5cm] {};
	\node at (D) {\footnotesize SO do host};
	\node (rect) at (E) [draw,thick,minimum width=1.625cm,minimum height=3cm] {};
	\node at ($(E)+(0,1.25)$) {\scriptsize VM};
	\node (rect) at (F) [draw,thick,minimum width=1.625cm,minimum height=3cm] {};
	\node at ($(F)+(0,1.25)$) {\scriptsize VM};
	\node (rect) at (G) [draw,thick,minimum width=1.125cm,minimum height=1cm] {};
	\node at (G) {\tiny App 2};
	\node (rect) at (H) [draw,thick,minimum width=1.125cm,minimum height=1cm] {};
	\node[align=center] at (H) {\tiny Guest OS\\ \tiny Windows};
	\node (rect) at (I) [draw,thick,minimum width=1.125cm,minimum height=1cm] {};
	\uncover<2->{\node (rect) at (I) [red,draw,thick,minimum width=1.125cm,minimum height=1cm] {};}
	\node at (I) {\tiny App 1};
	\node (rect) at (J) [draw,thick,minimum width=1.125cm,minimum height=1cm] {};
	\uncover<2->{\node (rect) at (J) [red,draw,thick,minimum width=1.125cm,minimum height=1cm] {};}
	\node[align=center] at (J) {\tiny Guest OS\\ \tiny Linux};
\end{tikzpicture}
\columnbreak
\begin{tikzpicture}
	\coordinate (A) at (0,0);
	\coordinate (B) at (0,-2.25);
	\coordinate (C) at (0,-0.75);
	\coordinate (D) at (0,-1.5);
	\coordinate (E) at (-0.925,1.25);
	\coordinate (F) at (0.925,1.25);
	\coordinate (G) at (0.925,1);
	\coordinate (H) at (-0.925,1);
	\node (rect) at (A) [draw,thick,minimum width=4cm,minimum height=6cm] {};
	\node (rect) at (B) [draw,thick,minimum width=3.5cm,minimum height=0.5cm] {};
	\node at (B) {\footnotesize Máquina host};
	\node (rect) at (C) [draw,thick,minimum width=3.5cm,minimum height=0.5cm] {};
	\node at (C) {\footnotesize Container Engine};
	\node (rect) at (D) [draw,thick,minimum width=3.5cm,minimum height=0.5cm] {};
	\node at (D) {\footnotesize SO do host};
	\node (rect) at (E) [draw,thick,minimum width=1.625cm,minimum height=3cm] {};
	\node at ($(E)+(0,1.25)$) {\scriptsize Container};
	\node (rect) at (F) [draw,thick,minimum width=1.625cm,minimum height=3cm] {};
	\node at ($(F)+(0,1.25)$) {\scriptsize Container};
	\node (rect) at (G) [draw,thick,minimum width=1.125cm,minimum height=2cm] {};
	\node at (G) {\tiny App 2};
	\node (rect) at (H) [draw,thick,minimum width=1.125cm,minimum height=2cm] {};
	\uncover<2->{\node (rect) at (H) [red,draw,thick,minimum width=1.125cm,minimum height=2cm] {};}
	\node[align=center] at (H) {\tiny App 1};
\end{tikzpicture}
\end{multicols}
\end{frame}
